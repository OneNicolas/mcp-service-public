name = "mcp-service-public"
main = "src/index.ts"
compatibility_date = "2025-02-20"
compatibility_flags = ["nodejs_compat"]

# Migration to remove the old Durable Object
[[migrations]]
tag = "v1"
new_sqlite_classes = ["ServicePublicMcp"]

[[migrations]]
tag = "v2"
deleted_classes = ["ServicePublicMcp"]

# D1 database for fiches index
[[d1_databases]]
binding = "DB"
database_name = "service-public-db"
database_id = "91451f1f-61ba-4aef-b152-c725b4ac99e5"

# Cron trigger for daily DILA data sync
[triggers]
crons = ["0 6 * * *"]
